<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L·ªãch S·ª± Ki·ªán Th√°ng 12 Ho√†n Ch·ªânh</title>

<!-- BOOTSTRAP CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    background-image: url('https://i.postimg.cc/MpfwkmQj/TNT_24.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
}

.calendar-wrapper {
    width: 100%;
}

table {
    border-collapse: collapse;
    table-layout: fixed;
    width: 1200px;
    max-width: 95%;
    margin: auto;
    background-color: rgba(255, 255, 255, 0.95);
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    border-radius: 12px;
    overflow: hidden;
}

caption {
    font-size: 2em;
    font-weight: 900;
    color: white;
    padding: 20px 0;
    text-shadow: 2px 2px 5px black;
}

th {
    background-color: #3f51b5;
    color: white;
    height: 50px;
}
th:first-child {
    background-color: #f44336;
}

td {
    border: 1px solid #e0e0e0;
    text-align: center;
    vertical-align: top;
    padding: 6px;
    height: 130px;
    background-color: rgba(255,255,255,0.6);
    transition: 0.3s;
    position: relative;
}

.weekend { background-color: rgba(255,249,230,0.8); }

.other-month {
    background-color: rgba(0,0,0,0.15) !important;
    color: #666;
}

.past-day {
    color: #777 !important;
    text-decoration: line-through;
    opacity: 0.6;
}

.today {
    background-color: rgba(232,245,233,0.95) !important;
    box-shadow: inset 0 0 0 4px #4CAF50;
    font-weight: bold;
}

.day-number {
    display: block;
    font-weight: 900;
    font-size: 1.7em;
    margin-bottom: 5px;
    text-align: right;
    padding-right: 5px;
    color: #3f51b5;
}

/* NOTE STYLE */
.note, .hof {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 4px 6px;
    border-radius: 6px;
    margin-top: 4px;
    font-size: 0.9em;
    cursor: pointer;
    transition: 0.15s;
    gap: 6px;               /* kho·∫£ng c√°ch gi·ªØa text v√† badge */
    overflow: hidden;       /* tr√°nh badge tr√†n ra kh·ªèi √¥ */
    min-width: 0;           /* cho ellipsis ho·∫°t ƒë·ªông b√™n trong flex */
}

/* === HoF pulse (kh√¥i ph·ª•c / s·ª≠a) === */
.hof {
  border: 3px solid #ff0000;
  color: #cc0000;
  font-weight: bolder;
  background-color: #fff0f0;
  font-size: 1em;
  text-align: center;
  padding: 6px;
  border-radius: 6px;
  display: inline-block;
  animation: hof-pulse 1.6s infinite;
  box-sizing: border-box;
}

/* keyframes ri√™ng cho hof ƒë·ªÉ tr√°nh tr√πng t√™n */
@keyframes hof-pulse {
  0%   { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,0,0,0.35); }
  50%  { transform: scale(1.02); box-shadow: 0 6px 18px rgba(255,0,0,0.15); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,0,0,0); }
}

.note:hover { transform: translateY(-2px); filter: brightness(1.15); }

.note-text { 
  flex-grow: 1; 
  text-align: left; 
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;	
}

.note.ocg { background:#ffcdd2; color:#b71c1c; border-left:5px solid #b71c1c; }
.note.ae { background:#c8e6c9; color:#2e7d32; border-left:5px solid #2e7d32; }
.note.genesys { background:#bbdefb; color:#1976d2; border-left:5px solid #1976d2; }
.note.tnt {
  /* base ƒë·ªÉ note.tnt v·∫´n h·ª£p nh·∫•t layout */
  color: #5a5a5a;
  background: rgba(255,255,255,0.85);
  border-left: 5px solid rgba(0,0,0,0.05);
}
.note.tnt.ocg {
  background: #ffcdd2;
  color: #b71c1c;
  border-left: 5px solid #b71c1c;
}
.note.tnt.genesys {
  background: #bbdefb;
  color: #1976d2;
  border-left: 5px solid #1976d2;
}
.note.nexus { background:#e0f7fa; color:#00838f; border-left:5px solid #00acc1; }
.note.edison { background:#fff3e0; color:#e65100; border-left:5px solid #ff9800; }
.note.anhtournament { background:#f3e5f5; color:#6a1b9a; border-left:5px solid #9c27b0; }

.hof {
    border: 3px solid red;
    color: red;
    font-weight: bold;
    background: #ffe5e5;
    text-align: center;
}

.note::after, .note::before {
    padding: 1px 4px;
    background: white;
    border-radius: 4px;
    font-size: 0.8em;
    margin-left: 5px;
    font-weight: 700;
}

/* badge/ico ki·ªÉu inline-block, kh√¥ng absolute */
.note::after, .note::before, .hof::after, .hof::before {
  display: inline-block;
  vertical-align: middle;
  white-space: nowrap;
  padding: 0 6px;
  margin-left: 4px;
  box-sizing: border-box;
  max-width: 100%;       /* prevent overflow */
  overflow: hidden;
  text-overflow: ellipsis;
}

/* BADGES */
.note.ocg::after { content:"OCG"; border:1px solid #b71c1c; color:#b71c1c; }
.note.ae::after { content:"AE"; border:1px solid #2e7d32; color:#2e7d32; }
.note.genesys::after { content:"GNS"; border:1px solid #1976d2; color:#1976d2; }
.note.tnt::before { content:"üì∫"; margin-right:4px; background:none; }
.note.nexus::after { content:"1103"; border:1px solid #00acc1; color:#00acc1; }
.note.edison::after { content:"E"; border:1px solid #ff9800; color:#ff9800; }
.note.anhtournament::after { content:"Tour"; border:1px solid #9c27b0; color:#9c27b0; }

/* Badge / icon kh√¥ng ellipsis */
.note::after,
.note::before,
.hof::after,
.hof::before {
    display: inline-block;
    white-space: nowrap;
    overflow: visible !important;   /* <-- Quan tr·ªçng */
    text-overflow: clip !important; /* <-- Quan tr·ªçng */
    max-width: none !important;     /* <-- Quan tr·ªçng */
    margin-left: 4px;
    padding: 0 6px;
}

@media (max-width:768px) {
    td { height: 95px; font-size: 11px; }
    .day-number { font-size: 1.3em; }
}

/* khi m√†n h√¨nh nh·ªè, gi·∫£m padding badge ƒë·ªÉ kh√¥ng ƒë·∫©y layout */
@media (max-width: 480px) {
  .note::after, .note::before, .hof::after, .hof::before {
    padding: 0 4px;
    font-size: 0.75em;
  }
  .note-text { white-space: nowrap; }
}
</style>
</head>

<body>

<div class="container-fluid">
  <div class="calendar-wrapper">
    <div class="table-responsive">
      <table id="calendar" class="table table-bordered text-center">
        <caption>Th√°ng 12</caption>
        <thead>
          <tr>
            <th>CN</th><th>T2</th><th>T3</th><th>T4</th><th>T5</th><th>T6</th><th>T7</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<!-- BOOTSTRAP JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const tbody = document.querySelector("#calendar tbody");
const today = new Date();
const year = today.getFullYear();
const month = 11; // December (0-based)
const firstDay = new Date(year, month, 1).getDay();
const daysInMonth = new Date(year, month+1, 0).getDate();

let date = 1;

for (let i = 0; i < 6; i++) {
  const row = document.createElement("tr");

  for (let j = 0; j < 7; j++) {
    const cell = document.createElement("td");

    if (i === 0 && j < firstDay) {
        cell.classList.add("other-month");
        cell.innerHTML = ""; // show as shaded cells for days before month
    } 
    else if (date > daysInMonth) {
        cell.classList.add("other-month");
        cell.innerHTML = "";
    }
    else {
      const daySpan = document.createElement("span");
      daySpan.classList.add("day-number");
      daySpan.textContent = date;
      cell.appendChild(daySpan);

      const cellDate = new Date(year, month, date);

      if (cellDate.toDateString() === today.toDateString()) cell.classList.add("today");
      else if (cellDate < today) cell.classList.add("past-day");

      if (j === 0 || j === 6) cell.classList.add("weekend");

      const weekIndex = Math.ceil((date + firstDay) / 7);

      // Sunday events
      if (j === 0) {
          if (weekIndex === 2) addNote(cell, "Mahado Nexus 1103", "nexus");
          if (weekIndex === 4) addNote(cell, "Mahado Edison", "edison");
          if (date === 14) addNote(cell, "Mahado Genesys", "genesys");
          if (date === 28) addNote(cell, "Anh B√¨nh Tournament", "anhtournament");
      }

      // Tuesday events (T3)
      if (j === 2 && [1,3,4,5].includes(weekIndex)) {
          addNote(cell, "TNT OCG", "tnt", "ocg");
      }

      // Saturday events (T7)
      if (j === 6 && [1,3].includes(weekIndex)) {
          addNote(cell, "Mahado OCG Open", "ocg");
      }

      // Specific dates
      if (date === 9) addNote(cell, "TNT Genesys", "tnt", "genesys");
      if (date === 13) addNote(cell, "Mahado Open AE", "ae");
      if (date === 27) addNote(cell, "Mahado HoF Kickoff", "hof", null, true);

      date++;
    }

    row.appendChild(cell);
  }

  tbody.appendChild(row);
  if (date > daysInMonth) break;
}

// addNote now accepts variable classes safely
function addNote(cell, text, cls=null, cls2=null, special=false) {
    let note = document.createElement("span");

    if (special && cls) {
        note.classList.add(cls); // e.g. hof (special styling already)
    } else {
        note.classList.add("note");
        if (cls) {
            // if cls contains spaces (accidental), split them safely
            cls.toString().split(/\s+/).filter(Boolean).forEach(c => note.classList.add(c));
        }
        if (cls2) {
            cls2.toString().split(/\s+/).filter(Boolean).forEach(c => note.classList.add(c));
        }
    }

    let t = document.createElement("span");
    t.classList.add("note-text");
    t.textContent = text;
    note.appendChild(t);

    // bootstrap tooltip
    note.setAttribute("data-bs-toggle", "tooltip");
    note.setAttribute("title", text);

    cell.appendChild(note);
}

// initialize bootstrap tooltips
const tooltipTriggerList = Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
tooltipTriggerList.forEach(el => new bootstrap.Tooltip(el));
</script>

</body>
</html>
